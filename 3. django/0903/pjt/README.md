# 프레임워크 기반 웹 페이지 구현

> 이번주 내내 Django에 매달렸더니, 그래도 어느 정도 순서와 그에 따른 구성은 알게된 것 같다. 
>
> 하지만 아직 FE부분은 조금 더 해봐야 익숙해질 것 같다.
>
> Django의 기본적인 부분에 대한 설명과 더불어 프로젝트 중요 함수들에 대한 설명을 적어보았다.



### MTV

Django(장고)는 MVC (Model-View-Controller)를 기반으로 한 프레임워크이다. 하지만 장고에서는 이를 MTV(Model-Template-View)라고 부른다.

1. Model

   모델은 **데이터베이스에 저장되는 데이터**를 의미한다. 데이터베이스를 다루기 위해서는 SQL이라는 언어를 사용하지만, 장고에서는 SQL을 사용하지 않고 데이터베이스를 다룰 수 있도록 **ORM**을 제공한다.

   > ORM(Object-Relational-Mapping): SQL없이 데이터베이스를 연결해주는 방법

2. Template

   템플릿은 **사용자에게 보여지는 부분**이다. 장고 템플릿 시스템 문법에 맞춰 python 문법을 활용하여 작성하면 되므로, 다른 작업들과 화면 디자인 작업을 분리하여 확장성을 극대화시킬 수 있다. 

3. View

   뷰는 웹 요청을 받고, 전달받은 데이터들을 해당 어플리케이션의 로직으로 가공하여 그 결과를 템플릿에 전송한다. **데이터를 가공하는 처리는 뷰에서 함수를 작성하여 처리한다.**



### Django Template Language (DTL)

- Django Template에서 사용하는 Built-in Template System
- 조건, 반복, 변수 치환, 필터 등의 기능을 제공한다.
- 단순히 Python이 HTML에 포함된 것이 아니며, 프로그래밍적 로직이 아니라 **프레젠테이션**을 표현하기 위한 것이다.
- 파이썬처럼 일부 프로그래밍 구조(if, for 등)를 사용할 수 있지만, 이것은 해당 **Python 코드로 실행되는 것이 아니다.**



### views.py에서 각 함수들의 역할

- index

  index함수는 초기화면(main page)을 구성한다. urls.py에서 초기화면으로 지정해주었으며, render를 통해 index.html의 내용을 화면에 출력한다.

- new

  new함수는 데이터 입력 화면을 구성한다. urls.py에서 주소를 구성해주었으며, render를 통해 new.html의 내용을 화면에 출력한다.

- create

  create함수는 new의 화면에서 입력받은 데이터를 데이터 베이스에 옮기는 역할을 수행한다. 각각 입력 요소에 맞춰 데이터를 저장하며, 데이터 저장 완료 시 urls.py를 따라 detail을 불러낸다.

- detail 

  detail함수는 입력받거나, 수정되거나, index화면에서 클릭된 경우 호출되는데, 데이터베이스에서 해당 pk에 해당하는 상세내용을 화면에 출력한다.

- edit

  edit함수는 new함수와 비슷하다. 차이점이 있다면, edit.html에서 차이가 존재하는데 이미 입력되어 있는 내용을 입력박스에 출력한다.

- update

  update함수는 create함수와 비슷하다. 차이점이 있다면, 해당 pk에 맞춰 데이터베이스 내의 입력된 정보를 수정한다는 차이점이 존재한다.

- delete

  delete함수는 POST로 입력받은 데이터에 한해서만 삭제 연산을 수행한다. 그렇지 않은 경우는 detail화면을 출력하도록 구성해주었다.

  (GET을 통해 데이터를 입력하는 경우, UI뿐만 아니라 링크 수정으로도 데이터를 삭제할 수 있기 때문에, 보안성을 위해 POST를 사용하며 POST에서만 삭제가 이루어지도록 설정해주었다.)



### GET과 POST의 차이

GET 과 POST 는 HTTP 메서드로 클라이언트에서 서버로 무언가를 요청할 때 사용한다. 

이 둘의 특징적인 차이는 다음과 같다.

1. **사용목적** : 

   GET은 서버의 리소스에서 데이터를 요청할 때, POST는 서버의 리소스를 새로 생성하거나 업데이트할 때 사용한다.

   DB로 따지면 GET은 SELECT 에 가깝고, POST는 Create 에 가깝다고 보면 된다.

2. **요청에 body 유무** 

   GET 은 URL 파라미터에 요청하는 데이터를 담아 보내기 때문에 HTTP 메시지에 body가 없다. 

   POST 는 body 에 데이터를 담아 보내기 때문에 당연히 HTTP 메시지에 body가 존재한다.

3. **멱등성 (idempotent)** 

   GET 요청은 멱등이며, POST는 멱등이 아니다.

   > 멱등: 연산을 여러 번 적용하더라도 결과가 달라지지 않는 성질을 의미

-> 정리해보자면, 단순하게 GET은 데이터베이스에서 데이터를 검색할 때, POST는 데이터를 데이터베이스에 입력하거나 수정, 삭제할 때 사용하는 것이 옳은 것 같다고 생각한다.

